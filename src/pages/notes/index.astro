---
import Base from '../../layouts/Base.astro';
import { getCollection } from 'astro:content';

const notes = (await getCollection('notes'))
  .sort((a, b) => b.data.updated.valueOf() - a.data.updated.valueOf());

const categories = ['photography', 'ceramics', 'art', 'code', 'making', 'research'];
---

<Base title="Notes" description="Process notes and technique references">
  <h1>Notes</h1>
  <p class="intro">Process notes, technique references, and quick documentation.</p>

  {notes.length > 0 ? (
    <div class="notes">
      {categories.map(cat => {
        const catNotes = notes.filter(n => n.data.category === cat);
        return catNotes.length > 0 && (
          <section>
            <h2>{cat}</h2>
            <ul class="note-list">
              {catNotes.map(note => (
                <li>
                  <a href={`/notes/${note.id}`}>
                    <span class="title">{note.data.title}</span>
                    {note.data.description && <span class="desc">{note.data.description}</span>}
                  </a>
                </li>
              ))}
            </ul>
          </section>
        );
      })}
    </div>
  ) : (
    <p class="empty">No notes yet. Check back soon.</p>
  )}
</Base>

<style>
  h1 {
    margin-bottom: 0.5rem;
  }

  .intro {
    color: var(--color-text-muted);
    margin-bottom: 2rem;
  }

  section {
    margin-bottom: 2rem;
  }

  h2 {
    font-size: 1rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
    margin-bottom: 0.75rem;
  }

  .note-list {
    list-style: none;
  }

  .note-list li {
    border-bottom: 1px solid var(--color-border);
  }

  .note-list a {
    display: block;
    padding: 0.75rem 0;
    color: var(--color-text);
  }

  .note-list a:hover {
    text-decoration: none;
  }

  .note-list a:hover .title {
    color: var(--color-accent);
  }

  .title {
    font-weight: 500;
  }

  .desc {
    display: block;
    font-size: 0.875rem;
    color: var(--color-text-muted);
    margin-top: 0.25rem;
  }

  .empty {
    color: var(--color-text-muted);
    text-align: center;
    padding: 3rem 0;
  }
</style>
